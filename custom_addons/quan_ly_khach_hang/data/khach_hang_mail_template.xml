<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- Email Template: Ch√†o m·ª´ng kh√°ch h√†ng m·ªõi -->
        <record id="email_template_welcome_customer" model="mail.template">
            <field name="name">Kh√°ch h√†ng: Ch√†o m·ª´ng</field>
            <field name="model_id" ref="model_khach_hang"/>
            <field name="subject">Ch√†o m·ª´ng ${object.display_name} - C·∫£m ∆°n b·∫°n ƒë√£ quan t√¢m!</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${object.email|safe}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: Arial, Helvetica, sans-serif; font-size: 14px;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 20px;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <tr>
                        <td style="padding: 40px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px 10px 0 0;">
                            <h1 style="color: white; margin: 0;">ü§ù Ch√†o m·ª´ng!</h1>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 40px;">
                            <p style="font-size: 16px; line-height: 1.6;">
                                K√≠nh g·ª≠i <strong>${object.display_name}</strong>,
                            </p>
                            <p style="font-size: 16px; line-height: 1.6;">
                                C·∫£m ∆°n b·∫°n ƒë√£ quan t√¢m ƒë·∫øn d·ªãch v·ª• c·ªßa <strong>${object.company_id.name}</strong>. 
                                Ch√∫ng t√¥i r·∫•t vui m·ª´ng ƒë∆∞·ª£c ƒë·ªìng h√†nh c√πng b·∫°n!
                            </p>
                            
                            <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                                <h3 style="color: #667eea; margin-top: 0;">üë§ Th√¥ng tin li√™n h·ªá:</h3>
                                <ul style="list-style: none; padding: 0;">
                                    <li style="padding: 8px 0;"><strong>M√£ kh√°ch h√†ng:</strong> ${object.customer_code}</li>
                                    % if object.primary_employee_id:
                                    <li style="padding: 8px 0;"><strong>Nh√¢n vi√™n ph·ª• tr√°ch:</strong> ${object.primary_employee_id.name}</li>
                                    <li style="padding: 8px 0;"><strong>Email:</strong> ${object.primary_employee_id.work_email or 'N/A'}</li>
                                    <li style="padding: 8px 0;"><strong>ƒêi·ªán tho·∫°i:</strong> ${object.primary_employee_id.phone or 'N/A'}</li>
                                    % endif
                                </ul>
                            </div>
                            
                            <p style="font-size: 16px; line-height: 1.6;">
                                N·∫øu b·∫°n c√≥ b·∫•t k·ª≥ c√¢u h·ªèi n√†o, ƒë·ª´ng ng·∫ßn ng·∫°i li√™n h·ªá v·ªõi ch√∫ng t√¥i. 
                                Ch√∫ng t√¥i lu√¥n s·∫µn s√†ng h·ªó tr·ª£ b·∫°n 24/7.
                            </p>
                            
                            <div style="text-align: center; margin: 30px 0;">
                                <a href="${object.website or object.company_id.website or '#'}" 
                                   style="background-color: #667eea; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;">
                                    T√¨m hi·ªÉu th√™m v·ªÅ ch√∫ng t√¥i
                                </a>
                            </div>
                            
                            <p style="font-size: 16px; line-height: 1.6; margin-top: 30px;">
                                Tr√¢n tr·ªçng,<br/>
                                <strong>ƒê·ªôi ng≈© ${object.company_id.name}</strong>
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 20px; text-align: center; background-color: #f8f9fa; border-radius: 0 0 10px 10px;">
                            <p style="color: #6c757d; font-size: 12px; margin: 0;">
                                ¬© ${object.company_id.name} - Gi·∫£i ph√°p CNTT v√† Chuy·ªÉn ƒë·ªïi s·ªë
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
            </field>
            <field name="lang">${object.lang}</field>
            <field name="auto_delete" eval="False"/>
        </record>
        
        <!-- Email Template: C·∫£nh b√°o nguy c∆° m·∫•t kh√°ch -->
        <record id="email_template_churn_risk_alert" model="mail.template">
            <field name="name">Kh√°ch h√†ng: C·∫£nh b√°o nguy c∆° m·∫•t</field>
            <field name="model_id" ref="model_khach_hang"/>
            <field name="subject">üö® C·∫£nh b√°o: ${object.display_name} c√≥ nguy c∆° m·∫•t cao</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${','.join([emp.work_email for emp in object.assigned_employee_ids if emp.work_email])}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: Arial, Helvetica, sans-serif; font-size: 14px;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 20px;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: white; border-radius: 10px;">
                    <tr>
                        <td style="padding: 30px; border-left: 5px solid #dc3545;">
                            <h2 style="color: #dc3545; margin-top: 0;">üö® C·∫£nh b√°o nguy c∆° m·∫•t kh√°ch h√†ng</h2>
                            
                            <p style="font-size: 16px; line-height: 1.6;">
                                Kh√°ch h√†ng <strong>${object.display_name}</strong> c√≥ nguy c∆° m·∫•t cao. C·∫ßn h√†nh ƒë·ªông ngay!
                            </p>
                            
                            <div style="background-color: #f8d7da; padding: 20px; border-radius: 8px; margin: 20px 0;">
                                <ul style="list-style: none; padding: 0;">
                                    <li style="padding: 8px 0;"><strong>M√£ kh√°ch h√†ng:</strong> ${object.customer_code}</li>
                                    <li style="padding: 8px 0;"><strong>Lo·∫°i:</strong> ${dict(object._fields['customer_type'].selection).get(object.customer_type, 'N/A')}</li>
                                    <li style="padding: 8px 0;"><strong>Tr·∫°ng th√°i:</strong> ${dict(object._fields['status'].selection).get(object.status, 'N/A')}</li>
                                    <li style="padding: 8px 0; color: #dc3545; font-size: 20px;">
                                        <strong>üö® Nguy c∆° m·∫•t:</strong> ${f'{object.churn_risk:.0f}' if object.churn_risk else '0'}%
                                    </li>
                                    <li style="padding: 8px 0;"><strong>AI Score:</strong> ${f'{object.ai_score:.1f}' if object.ai_score else '0.0'}/100</li>
                                    <li style="padding: 8px 0;"><strong>S·ªë ng√†y ch∆∞a li√™n h·ªá:</strong> ${object.days_since_last_contact} ng√†y</li>
                                </ul>
                                
                                % if object.ai_recommendations:
                                <h4 style="color: #dc3545;">üí° Khuy·∫øn ngh·ªã t·ª´ AI:</h4>
                                <div style="background-color: white; padding: 15px; border-radius: 5px; white-space: pre-line;">
                                    ${object.ai_recommendations}
                                </div>
                                % endif
                            </div>
                            
                            <div style="background-color: #fff3cd; padding: 15px; border-radius: 5px; margin: 20px 0;">
                                <strong>‚ö° H√†nh ƒë·ªông c·∫ßn l√†m ngay:</strong>
                                <ol style="margin: 10px 0; padding-left: 20px;">
                                    <li>Li√™n h·ªá ngay v·ªõi kh√°ch h√†ng</li>
                                    <li>T√¨m hi·ªÉu v·∫•n ƒë·ªÅ v√† nhu c·∫ßu</li>
                                    <li>ƒê·ªÅ xu·∫•t gi·∫£i ph√°p ph√π h·ª£p</li>
                                    <li>C·∫≠p nh·∫≠t th√¥ng tin v√†o h·ªá th·ªëng</li>
                                </ol>
                            </div>
                            
                            <div style="text-align: center; margin: 30px 0;">
                                <a href="/web#id=${object.id}&amp;view_type=form&amp;model=khach.hang" 
                                   style="background-color: #dc3545; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;">
                                    Xem chi ti·∫øt kh√°ch h√†ng
                                </a>
                            </div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
            </field>
            <field name="lang">${object.lang}</field>
            <field name="auto_delete" eval="False"/>
        </record>
        
        <!-- Email Template: Ch√∫c m·ª´ng chuy·ªÉn ƒë·ªïi th√†nh c√¥ng -->
        <record id="email_template_customer_activated" model="mail.template">
            <field name="name">Kh√°ch h√†ng: Ch√∫c m·ª´ng k√≠ch ho·∫°t</field>
            <field name="model_id" ref="model_khach_hang"/>
            <field name="subject">üéâ Ch√∫c m·ª´ng ${object.display_name} - H·ª£p t√°c th√†nh c√¥ng!</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${object.email|safe}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: Arial, Helvetica, sans-serif; font-size: 14px;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 20px;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: white; border-radius: 10px;">
                    <tr>
                        <td style="padding: 40px; text-align: center; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); border-radius: 10px 10px 0 0;">
                            <h1 style="color: white; margin: 0;">üéâ Ch√∫c m·ª´ng!</h1>
                            <p style="color: white; font-size: 18px; margin: 10px 0 0 0;">Ch√∫ng ta ch√≠nh th·ª©c h·ª£p t√°c!</p>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 40px;">
                            <p style="font-size: 16px; line-height: 1.6;">
                                K√≠nh g·ª≠i <strong>${object.display_name}</strong>,
                            </p>
                            <p style="font-size: 16px; line-height: 1.6;">
                                Ch√∫ng t√¥i r·∫•t vui m·ª´ng th√¥ng b√°o r·∫±ng h·ª£p t√°c gi·ªØa <strong>${object.company_id.name}</strong> 
                                v√† <strong>${object.display_name}</strong> ƒë√£ ch√≠nh th·ª©c ƒë∆∞·ª£c k√≠ch ho·∫°t! üéä
                            </p>
                            
                            <div style="background-color: #d4edda; padding: 25px; border-radius: 8px; margin: 25px 0; text-align: center;">
                                <div style="font-size: 48px; margin-bottom: 10px;">ü§ù</div>
                                <h3 style="color: #28a745; margin: 0;">Ch√†o m·ª´ng ƒë·∫øn v·ªõi gia ƒë√¨nh ${object.company_id.name}!</h3>
                            </div>
                            
                            <p style="font-size: 16px; line-height: 1.6;">
                                Ch√∫ng t√¥i cam k·∫øt mang ƒë·∫øn cho b·∫°n:
                            </p>
                            <ul style="font-size: 16px; line-height: 1.8;">
                                <li>‚úÖ D·ªãch v·ª• ch·∫•t l∆∞·ª£ng cao nh·∫•t</li>
                                <li>‚úÖ H·ªó tr·ª£ t·∫≠n t√¢m 24/7</li>
                                <li>‚úÖ Gi·∫£i ph√°p c√¥ng ngh·ªá ti√™n ti·∫øn</li>
                                <li>‚úÖ ƒê·ªôi ng≈© chuy√™n gia gi√†u kinh nghi·ªám</li>
                            </ul>
                            
                            <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                                <h3 style="color: #667eea; margin-top: 0;">üìû Th√¥ng tin li√™n h·ªá:</h3>
                                % if object.primary_employee_id:
                                <p style="margin: 5px 0;"><strong>Nh√¢n vi√™n ph·ª• tr√°ch:</strong> ${object.primary_employee_id.name}</p>
                                <p style="margin: 5px 0;"><strong>Email:</strong> ${object.primary_employee_id.work_email or 'N/A'}</p>
                                <p style="margin: 5px 0;"><strong>ƒêi·ªán tho·∫°i:</strong> ${object.primary_employee_id.phone or 'N/A'}</p>
                                % endif
                            </div>
                            
                            <p style="font-size: 16px; line-height: 1.6; margin-top: 30px;">
                                C·∫£m ∆°n b·∫°n ƒë√£ tin t∆∞·ªüng v√† l·ª±a ch·ªçn ch√∫ng t√¥i. Ch√∫ng t√¥i mong mu·ªën ƒë∆∞·ª£c ƒë·ªìng h√†nh 
                                c√πng b·∫°n tr√™n con ƒë∆∞·ªùng ph√°t tri·ªÉn!
                            </p>
                            
                            <p style="font-size: 16px; line-height: 1.6; margin-top: 30px;">
                                Tr√¢n tr·ªçng,<br/>
                                <strong>Ban l√£nh ƒë·∫°o ${object.company_id.name}</strong>
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
            </field>
            <field name="lang">${object.lang}</field>
            <field name="auto_delete" eval="False"/>
        </record>
        
        
        <!-- ==================== EMAIL TEMPLATES THEO Y√äU C·∫¶U ==================== -->
        
        <!-- 1. Email Template: GIAO KH√ÅCH H√ÄNG -->
        <record id="email_template_assign_customer" model="mail.template">
            <field name="name">[CRM] Giao kh√°ch h√†ng</field>
            <field name="model_id" ref="model_khach_hang"/>
            <field name="subject">[CRM] B·∫°n ƒë∆∞·ª£c ph√¢n c√¥ng ph·ª• tr√°ch kh√°ch h√†ng: ${object.display_name}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${','.join([emp.work_email for emp in object.assigned_employee_ids if emp.work_email and emp.user_id])}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: Arial, Helvetica, sans-serif; font-size: 14px;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 20px;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <!-- Header -->
                    <tr>
                        <td style="padding: 30px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px 10px 0 0;">
                            <h1 style="color: white; margin: 0; font-size: 24px;">üìã GIAO KH√ÅCH H√ÄNG</h1>
                        </td>
                    </tr>
                    <!-- Content -->
                    <tr>
                        <td style="padding: 40px;">
                            <!-- Ai g·ª≠i? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                                <strong style="color: #667eea;">üë§ Ai g·ª≠i:</strong>
                                <p style="margin: 5px 0 0 0;">H·ªá th·ªëng (ƒë·∫°i di·ªán ${user.name})</p>
                            </div>
                            
                            <!-- G·ª≠i cho ai? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                                <strong style="color: #667eea;">üìß G·ª≠i cho:</strong>
                                <p style="margin: 5px 0 0 0;">
                                    % for emp in object.assigned_employee_ids:
                                    ${emp.name}${',' if not loop.last else ''}
                                    % endfor
                                </p>
                            </div>
                            
                            <!-- G·ª≠i v√¨ vi·ªác g√¨? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #e7f3ff; border-left: 4px solid #667eea; border-radius: 8px;">
                                <strong style="color: #667eea;">üìå G·ª≠i v√¨ vi·ªác g√¨:</strong>
                                <p style="margin: 5px 0 0 0; font-size: 16px;">
                                    <strong>B·∫°n ch√≠nh th·ª©c ch·ªãu tr√°ch nhi·ªám kh√°ch h√†ng n√†y</strong>
                                </p>
                            </div>
                            
                            <!-- Th√¥ng tin kh√°ch h√†ng -->
                            <div style="background-color: #f8f9fa; padding: 25px; border-radius: 8px; margin: 25px 0; border-left: 5px solid #667eea;">
                                <h3 style="color: #667eea; margin-top: 0;">üìã Th√¥ng tin kh√°ch h√†ng:</h3>
                                <table width="100%" style="border-collapse: collapse;">
                                    <tr>
                                        <td style="padding: 8px 0; width: 40%;"><strong>T√™n kh√°ch h√†ng:</strong></td>
                                        <td style="padding: 8px 0;">${object.display_name}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>M√£ kh√°ch h√†ng:</strong></td>
                                        <td style="padding: 8px 0;">${object.customer_code}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Tr·∫°ng th√°i hi·ªán t·∫°i:</strong></td>
                                        <td style="padding: 8px 0;">
                                            <span style="background-color: #e7f3ff; padding: 4px 12px; border-radius: 4px; color: #667eea; font-weight: bold;">
                                                ${dict(object._fields['status'].selection).get(object.status, 'N/A')}
                                            </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>M·ª©c ƒë·ªô ti·ªÅm nƒÉng:</strong></td>
                                        <td style="padding: 8px 0;">
                                            <span style="background-color: ${'#fff3cd' if object.level == 'warm' else '#d4edda' if object.level == 'hot' else '#f8d7da'}; padding: 4px 12px; border-radius: 4px;">
                                                ${dict(object._fields['level'].selection).get(object.level, 'N/A')}
                                            </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Vai tr√≤ c·ªßa b·∫°n:</strong></td>
                                        <td style="padding: 8px 0; color: #28a745; font-weight: bold;">Nh√¢n vi√™n ph·ª• tr√°ch ch√≠nh</td>
                                    </tr>
                                    % if object.phone:
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>ƒêi·ªán tho·∫°i:</strong></td>
                                        <td style="padding: 8px 0;">${object.phone}</td>
                                    </tr>
                                    % endif
                                    % if object.email:
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Email:</strong></td>
                                        <td style="padding: 8px 0;">${object.email}</td>
                                    </tr>
                                    % endif
                                </table>
                            </div>
                            
                            <!-- C·∫ßn l√†m g√¨? -->
                            <div style="margin-bottom: 20px; padding: 20px; background-color: #fff3cd; border-radius: 8px;">
                                <strong style="color: #856404; font-size: 16px;">‚úÖ C·∫ßn b·∫°n l√†m g√¨:</strong>
                                <ol style="margin: 10px 0; padding-left: 20px; color: #856404;">
                                    <li>Xem th√¥ng tin chi ti·∫øt kh√°ch h√†ng</li>
                                    <li>B·∫Øt ƒë·∫ßu chƒÉm s√≥c v√† li√™n h·ªá v·ªõi kh√°ch h√†ng</li>
                                    <li>T·∫°o t∆∞∆°ng t√°c (g·ªçi ƒëi·ªán, g·ª≠i email, h·∫πn g·∫∑p)</li>
                                    <li>C·∫≠p nh·∫≠t ti·∫øn tr√¨nh trong h·ªá th·ªëng</li>
                                </ol>
                            </div>
                            
                            <!-- Link truy c·∫≠p nhanh -->
                            <div style="text-align: center; margin: 30px 0;">
                                <a href="/web#id=${object.id}&amp;view_type=form&amp;model=khach.hang" 
                                   style="background-color: #667eea; color: white; padding: 14px 35px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold; font-size: 16px;">
                                    üîó M·ªü kh√°ch h√†ng trong Odoo
                                </a>
                            </div>
                            
                            <p style="font-size: 14px; color: #6c757d; line-height: 1.6; margin-top: 30px; text-align: center;">
                                Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông t·ª´ h·ªá th·ªëng Odoo<br/>
                                Vui l√≤ng kh√¥ng tr·∫£ l·ªùi email n√†y
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
            </field>
            <field name="lang">${object.assigned_employee_ids[0].lang if object.assigned_employee_ids else 'en_US'}</field>
            <field name="auto_delete" eval="False"/>
        </record>
        
    </data>
</odoo>
