<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- ==================== EMAIL TEMPLATES THEO Y√äU C·∫¶U ==================== -->
        
        <!-- 2. Email Template: GIAO C√îNG VI·ªÜC -->
        <record id="email_template_task_assigned" model="mail.template">
            <field name="name">[TASK] Giao c√¥ng vi·ªác</field>
            <field name="model_id" ref="model_cong_viec"/>
            <field name="subject">[TASK] B·∫°n ƒë∆∞·ª£c giao c√¥ng vi·ªác: ${object.name}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${object.assigned_employee_id.work_email|safe}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: Arial, Helvetica, sans-serif; font-size: 14px;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 20px;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <!-- Header -->
                    <tr>
                        <td style="padding: 30px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px 10px 0 0;">
                            <h1 style="color: white; margin: 0; font-size: 24px;">üìã GIAO C√îNG VI·ªÜC</h1>
                        </td>
                    </tr>
                    <!-- Content -->
                    <tr>
                        <td style="padding: 40px;">
                            <!-- Ai g·ª≠i? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                                <strong style="color: #667eea;">üë§ Ai g·ª≠i:</strong>
                                <p style="margin: 5px 0 0 0;">${user.name} (Qu·∫£n l√Ω / Ng∆∞·ªùi giao vi·ªác)</p>
                            </div>
                            
                            <!-- G·ª≠i cho ai? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                                <strong style="color: #667eea;">üìß G·ª≠i cho:</strong>
                                <p style="margin: 5px 0 0 0;">${object.assigned_employee_id.name}</p>
                            </div>
                            
                            <!-- G·ª≠i v√¨ vi·ªác g√¨? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #e7f3ff; border-left: 4px solid #667eea; border-radius: 8px;">
                                <strong style="color: #667eea;">üìå G·ª≠i v√¨ vi·ªác g√¨:</strong>
                                <p style="margin: 5px 0 0 0; font-size: 16px;">
                                    <strong>ƒê√¢y l√† c√¥ng vi·ªác b·∫°n ph·∫£i l√†m</strong>
                                </p>
                            </div>
                            
                            <!-- Th√¥ng tin c√¥ng vi·ªác -->
                            <div style="background-color: #f8f9fa; padding: 25px; border-radius: 8px; margin: 25px 0; border-left: 5px solid #667eea;">
                                <h3 style="color: #667eea; margin-top: 0;">üìã Th√¥ng tin c√¥ng vi·ªác:</h3>
                                <table width="100%" style="border-collapse: collapse;">
                                    <tr>
                                        <td style="padding: 8px 0; width: 40%;"><strong>T√™n c√¥ng vi·ªác:</strong></td>
                                        <td style="padding: 8px 0; font-weight: bold; color: #667eea;">${object.name}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>M√£ c√¥ng vi·ªác:</strong></td>
                                        <td style="padding: 8px 0;">${object.task_code}</td>
                                    </tr>
                                    % if object.customer_id:
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Kh√°ch h√†ng:</strong></td>
                                        <td style="padding: 8px 0;">${object.customer_id.display_name}</td>
                                    </tr>
                                    % endif
                                    % if object.supervisor_id:
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Ng∆∞·ªùi gi√°m s√°t:</strong></td>
                                        <td style="padding: 8px 0;">${object.supervisor_id.name}</td>
                                    </tr>
                                    % endif
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Deadline:</strong></td>
                                        <td style="padding: 8px 0; color: #dc3545; font-weight: bold;">
                                            ${format_datetime(object.deadline, tz='Asia/Ho_Chi_Minh', dt_format='dd/MM/yyyy HH:mm') if object.deadline else 'Ch∆∞a x√°c ƒë·ªãnh'}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>ƒê·ªô ∆∞u ti√™n:</strong></td>
                                        <td style="padding: 8px 0;">
                                            <span style="background-color: ${'#dc3545' if object.priority == '3' else '#ffc107' if object.priority == '2' else '#28a745'}; padding: 4px 12px; border-radius: 4px; color: white; font-weight: bold;">
                                                ${dict(object._fields['priority'].selection).get(object.priority, 'N/A')}
                                            </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Th·ªùi gian ∆∞·ªõc l∆∞·ª£ng:</strong></td>
                                        <td style="padding: 8px 0;">${object.estimated_hours} gi·ªù</td>
                                    </tr>
                                </table>
                                
                                <h4 style="color: #667eea; margin-top: 20px;">üìù Y√™u c·∫ßu c√¥ng vi·ªác:</h4>
                                <div style="background-color: white; padding: 15px; border-radius: 5px; margin-top: 10px;">
                                    ${object.requirement or 'Kh√¥ng c√≥ m√¥ t·∫£ chi ti·∫øt'}
                                </div>
                                
                                % if object.acceptance_criteria:
                                <h4 style="color: #667eea; margin-top: 15px;">‚úÖ Ti√™u ch√≠ nghi·ªám thu:</h4>
                                <div style="background-color: white; padding: 15px; border-radius: 5px; white-space: pre-line; margin-top: 10px;">
                                    ${object.acceptance_criteria}
                                </div>
                                % endif
                            </div>
                            
                            <!-- C·∫ßn l√†m g√¨? -->
                            <div style="margin-bottom: 20px; padding: 20px; background-color: #fff3cd; border-radius: 8px;">
                                <strong style="color: #856404; font-size: 16px;">‚úÖ C·∫ßn b·∫°n l√†m g√¨:</strong>
                                <ol style="margin: 10px 0; padding-left: 20px; color: #856404;">
                                    <li>Xem chi ti·∫øt c√¥ng vi·ªác v√† y√™u c·∫ßu</li>
                                    <li>B·∫Øt ƒë·∫ßu th·ª±c hi·ªán c√¥ng vi·ªác</li>
                                    <li>C·∫≠p nh·∫≠t ti·∫øn ƒë·ªô th∆∞·ªùng xuy√™n</li>
                                    <li>G·ª≠i duy·ªát khi ho√†n th√†nh</li>
                                </ol>
                            </div>
                            
                            <!-- Link truy c·∫≠p nhanh -->
                            <div style="text-align: center; margin: 30px 0;">
                                <a href="/web#id=${object.id}&amp;view_type=form&amp;model=cong.viec" 
                                   style="background-color: #667eea; color: white; padding: 14px 35px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold; font-size: 16px;">
                                    üîó M·ªü c√¥ng vi·ªác trong Odoo
                                </a>
                            </div>
                            
                            <p style="font-size: 14px; color: #6c757d; line-height: 1.6; margin-top: 30px; text-align: center;">
                                Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông t·ª´ h·ªá th·ªëng Odoo<br/>
                                Vui l√≤ng kh√¥ng tr·∫£ l·ªùi email n√†y
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
            </field>
            <field name="lang">${object.assigned_employee_id.lang}</field>
            <field name="auto_delete" eval="False"/>
        </record>
        
        <!-- Email Template: Nh·∫Øc nh·ªü deadline -->
        <record id="email_template_deadline_reminder" model="mail.template">
            <field name="name">C√¥ng vi·ªác: Nh·∫Øc nh·ªü deadline</field>
            <field name="model_id" ref="model_cong_viec"/>
            <field name="subject">‚è∞ Nh·∫Øc nh·ªü: ${object.name} s·∫Øp ƒë·∫øn deadline</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${object.assigned_employee_id.work_email|safe}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: Arial, Helvetica, sans-serif; font-size: 14px;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 20px;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: white; border-radius: 10px;">
                    <tr>
                        <td style="padding: 30px; border-left: 5px solid #ffc107;">
                            <h2 style="color: #ffc107; margin-top: 0;">‚è∞ Nh·∫Øc nh·ªü Deadline</h2>
                            
                            <p style="font-size: 16px; line-height: 1.6;">
                                Xin ch√†o <strong>${object.assigned_employee_id.name}</strong>,
                            </p>
                            
                            <p style="font-size: 16px; line-height: 1.6;">
                                C√¥ng vi·ªác <strong>"${object.name}"</strong> s·∫Øp ƒë·∫øn deadline. Vui l√≤ng ki·ªÉm tra v√† ho√†n th√†nh ƒë√∫ng h·∫°n.
                            </p>
                            
                            <div style="background-color: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0;">
                                <ul style="list-style: none; padding: 0;">
                                    <li style="padding: 8px 0;"><strong>M√£ c√¥ng vi·ªác:</strong> ${object.task_code}</li>
                                    <li style="padding: 8px 0;"><strong>Tr·∫°ng th√°i:</strong> ${dict(object._fields['state'].selection).get(object.state, 'N/A')}</li>
                                    <li style="padding: 8px 0;"><strong>Ti·∫øn ƒë·ªô:</strong> ${object.progress}%</li>
                                    <li style="padding: 8px 0; color: #dc3545; font-size: 18px;"><strong>‚è∞ Deadline:</strong> ${format_datetime(object.deadline, tz='Asia/Ho_Chi_Minh', dt_format='dd/MM/yyyy HH:mm') if object.deadline else 'N/A'}</li>
                                </ul>
                            </div>
                            
                            <div style="text-align: center; margin: 30px 0;">
                                <a href="/web#id=${object.id}&amp;view_type=form&amp;model=cong.viec" 
                                   style="background-color: #ffc107; color: #212529; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold;">
                                    C·∫≠p nh·∫≠t c√¥ng vi·ªác ngay
                                </a>
                            </div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
            </field>
            <field name="lang">${object.assigned_employee_id.lang}</field>
            <field name="auto_delete" eval="False"/>
        </record>
        
        <!-- 3. Email Template: G·ª¨I DUY·ªÜT C√îNG VI·ªÜC -->
        <record id="email_template_task_submit_review" model="mail.template">
            <field name="name">[TASK] Y√™u c·∫ßu duy·ªát c√¥ng vi·ªác</field>
            <field name="model_id" ref="model_cong_viec"/>
            <field name="subject">[TASK] Y√™u c·∫ßu duy·ªát: ${object.name}</field>
            <field name="email_from">${object.assigned_employee_id.work_email|safe}</field>
            <field name="email_to">${object.supervisor_id.work_email|safe}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: Arial, Helvetica, sans-serif; font-size: 14px;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 20px;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <!-- Header -->
                    <tr>
                        <td style="padding: 30px; text-align: center; background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%); border-radius: 10px 10px 0 0;">
                            <h1 style="color: white; margin: 0; font-size: 24px;">‚è≥ Y√äU C·∫¶U DUY·ªÜT C√îNG VI·ªÜC</h1>
                        </td>
                    </tr>
                    <!-- Content -->
                    <tr>
                        <td style="padding: 40px;">
                            <!-- Ai g·ª≠i? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                                <strong style="color: #ffc107;">üë§ Ai g·ª≠i:</strong>
                                <p style="margin: 5px 0 0 0;">${object.assigned_employee_id.name} (Nh√¢n vi√™n th·ª±c hi·ªán)</p>
                            </div>
                            
                            <!-- G·ª≠i cho ai? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                                <strong style="color: #ffc107;">üìß G·ª≠i cho:</strong>
                                <p style="margin: 5px 0 0 0;">${object.supervisor_id.name} (Ng∆∞·ªùi gi√°m s√°t)</p>
                            </div>
                            
                            <!-- G·ª≠i v√¨ vi·ªác g√¨? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #fff3cd; border-left: 4px solid #ffc107; border-radius: 8px;">
                                <strong style="color: #856404;">üìå G·ª≠i v√¨ vi·ªác g√¨:</strong>
                                <p style="margin: 5px 0 0 0; font-size: 16px;">
                                    <strong>Nh√¢n vi√™n ƒë√£ l√†m xong ‚Äì c·∫ßn anh/ch·ªã duy·ªát</strong>
                                </p>
                            </div>
                            
                            <!-- Th√¥ng tin c√¥ng vi·ªác -->
                            <div style="background-color: #f8f9fa; padding: 25px; border-radius: 8px; margin: 25px 0; border-left: 5px solid #ffc107;">
                                <h3 style="color: #ffc107; margin-top: 0;">üìã Th√¥ng tin c√¥ng vi·ªác:</h3>
                                <table width="100%" style="border-collapse: collapse;">
                                    <tr>
                                        <td style="padding: 8px 0; width: 40%;"><strong>T√™n c√¥ng vi·ªác:</strong></td>
                                        <td style="padding: 8px 0; font-weight: bold; color: #ffc107;">${object.name}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>M√£ c√¥ng vi·ªác:</strong></td>
                                        <td style="padding: 8px 0;">${object.task_code}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Ng∆∞·ªùi th·ª±c hi·ªán:</strong></td>
                                        <td style="padding: 8px 0;">${object.assigned_employee_id.name}</td>
                                    </tr>
                                    % if object.customer_id:
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Kh√°ch h√†ng:</strong></td>
                                        <td style="padding: 8px 0;">${object.customer_id.display_name}</td>
                                    </tr>
                                    % endif
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Ti·∫øn ƒë·ªô:</strong></td>
                                        <td style="padding: 8px 0; font-weight: bold; color: #28a745;">${object.progress}%</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Gi·ªù th·ª±c t·∫ø:</strong></td>
                                        <td style="padding: 8px 0;">${object.actual_hours} gi·ªù</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Th·ªùi gian g·ª≠i:</strong></td>
                                        <td style="padding: 8px 0;">${format_datetime(object.write_date, tz='Asia/Ho_Chi_Minh', dt_format='dd/MM/yyyy HH:mm')}</td>
                                    </tr>
                                </table>
                                
                                <h4 style="color: #ffc107; margin-top: 20px;">üìù K·∫øt qu·∫£ ƒë√£ l√†m:</h4>
                                <div style="background-color: white; padding: 15px; border-radius: 5px; margin-top: 10px; max-height: 300px; overflow-y: auto;">
                                    ${object.result_note or 'Ch∆∞a c√≥ k·∫øt qu·∫£'}
                                </div>
                            </div>
                            
                            <!-- C·∫ßn l√†m g√¨? -->
                            <div style="margin-bottom: 20px; padding: 20px; background-color: #fff3cd; border-radius: 8px;">
                                <strong style="color: #856404; font-size: 16px;">‚úÖ C·∫ßn b·∫°n l√†m g√¨:</strong>
                                <ol style="margin: 10px 0; padding-left: 20px; color: #856404;">
                                    <li>Xem k·∫øt qu·∫£ c√¥ng vi·ªác ƒë√£ l√†m</li>
                                    <li>Ki·ªÉm tra ƒë√°p ·ª©ng y√™u c·∫ßu</li>
                                    <li>Duy·ªát ho·∫∑c t·ª´ ch·ªëi c√¥ng vi·ªác</li>
                                    <li>Ghi ch√∫ ph·∫£n h·ªìi (n·∫øu t·ª´ ch·ªëi)</li>
                                </ol>
                            </div>
                            
                            <!-- Link duy·ªát nhanh -->
                            <div style="text-align: center; margin: 30px 0;">
                                <a href="/web#id=${object.id}&amp;view_type=form&amp;model=cong.viec" 
                                   style="background-color: #ffc107; color: #212529; padding: 14px 35px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold; font-size: 16px;">
                                    üîó Duy·ªát c√¥ng vi·ªác ngay
                                </a>
                            </div>
                            
                            <p style="font-size: 14px; color: #6c757d; line-height: 1.6; margin-top: 30px; text-align: center;">
                                Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông t·ª´ h·ªá th·ªëng Odoo<br/>
                                Vui l√≤ng kh√¥ng tr·∫£ l·ªùi email n√†y
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
            </field>
            <field name="lang">${object.supervisor_id.lang if object.supervisor_id else 'en_US'}</field>
            <field name="auto_delete" eval="False"/>
        </record>
        
        <!-- 4. Email Template: PH√ä DUY·ªÜT C√îNG VI·ªÜC -->
        <record id="email_template_task_approved" model="mail.template">
            <field name="name">[TASK] C√¥ng vi·ªác ƒë√£ ƒë∆∞·ª£c duy·ªát</field>
            <field name="model_id" ref="model_cong_viec"/>
            <field name="subject">[TASK] C√¥ng vi·ªác ƒë√£ ƒë∆∞·ª£c duy·ªát: ${object.name}</field>
            <field name="email_from">${object.supervisor_id.work_email|safe}</field>
            <field name="email_to">${object.assigned_employee_id.work_email|safe}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: Arial, Helvetica, sans-serif; font-size: 14px;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 20px;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <!-- Header -->
                    <tr>
                        <td style="padding: 30px; text-align: center; background: linear-gradient(135deg, #28a745 0%, #20c997 100%); border-radius: 10px 10px 0 0;">
                            <h1 style="color: white; margin: 0; font-size: 24px;">‚úÖ C√îNG VI·ªÜC ƒê√É ƒê∆Ø·ª¢C DUY·ªÜT</h1>
                        </td>
                    </tr>
                    <!-- Content -->
                    <tr>
                        <td style="padding: 40px;">
                            <!-- Ai g·ª≠i? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                                <strong style="color: #28a745;">üë§ Ai g·ª≠i:</strong>
                                <p style="margin: 5px 0 0 0;">${object.supervisor_id.name} (Ng∆∞·ªùi gi√°m s√°t)</p>
                            </div>
                            
                            <!-- G·ª≠i cho ai? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                                <strong style="color: #28a745;">üìß G·ª≠i cho:</strong>
                                <p style="margin: 5px 0 0 0;">${object.assigned_employee_id.name} (Nh√¢n vi√™n th·ª±c hi·ªán)</p>
                            </div>
                            
                            <!-- G·ª≠i v√¨ vi·ªác g√¨? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #d4edda; border-left: 4px solid #28a745; border-radius: 8px;">
                                <strong style="color: #155724;">üìå G·ª≠i v√¨ vi·ªác g√¨:</strong>
                                <p style="margin: 5px 0 0 0; font-size: 16px;">
                                    <strong>C√¥ng vi·ªác ƒë√£ ƒë∆∞·ª£c duy·ªát v√† ho√†n th√†nh</strong>
                                </p>
                            </div>
                            
                            <!-- Th√¥ng tin c√¥ng vi·ªác -->
                            <div style="background-color: #d4edda; padding: 25px; border-radius: 8px; margin: 25px 0; border-left: 5px solid #28a745;">
                                <h3 style="color: #28a745; margin-top: 0;">‚úÖ C√¥ng vi·ªác ƒë√£ ho√†n th√†nh:</h3>
                                <table width="100%" style="border-collapse: collapse;">
                                    <tr>
                                        <td style="padding: 8px 0; width: 40%;"><strong>T√™n c√¥ng vi·ªác:</strong></td>
                                        <td style="padding: 8px 0; font-weight: bold; color: #28a745;">${object.name}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>M√£ c√¥ng vi·ªác:</strong></td>
                                        <td style="padding: 8px 0;">${object.task_code}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Tr·∫°ng th√°i:</strong></td>
                                        <td style="padding: 8px 0;">
                                            <span style="background-color: #28a745; padding: 4px 12px; border-radius: 4px; color: white; font-weight: bold;">
                                                Ho√†n th√†nh
                                            </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Ng√†y ho√†n th√†nh:</strong></td>
                                        <td style="padding: 8px 0; font-weight: bold;">
                                            ${format_datetime(object.completed_date, tz='Asia/Ho_Chi_Minh', dt_format='dd/MM/yyyy HH:mm') if object.completed_date else 'N/A'}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Th·ªùi gian duy·ªát:</strong></td>
                                        <td style="padding: 8px 0;">${format_datetime(object.write_date, tz='Asia/Ho_Chi_Minh', dt_format='dd/MM/yyyy HH:mm')}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Ng∆∞·ªùi duy·ªát:</strong></td>
                                        <td style="padding: 8px 0;">${object.supervisor_id.name}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Ti·∫øn ƒë·ªô:</strong></td>
                                        <td style="padding: 8px 0; font-weight: bold; color: #28a745; font-size: 18px;">100%</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <!-- C·∫ßn l√†m g√¨? -->
                            <div style="margin-bottom: 20px; padding: 20px; background-color: #d4edda; border-radius: 8px;">
                                <strong style="color: #155724; font-size: 16px;">‚úÖ Th√¥ng b√°o:</strong>
                                <p style="margin: 10px 0 0 0; color: #155724; font-size: 16px;">
                                    C√¥ng vi·ªác ƒë√£ ƒë∆∞·ª£c ghi nh·∫≠n ho√†n th√†nh. C·∫£m ∆°n b·∫°n ƒë√£ ho√†n th√†nh t·ªët c√¥ng vi·ªác!
                                </p>
                            </div>
                            
                            <!-- Link xem chi ti·∫øt -->
                            <div style="text-align: center; margin: 30px 0;">
                                <a href="/web#id=${object.id}&amp;view_type=form&amp;model=cong.viec" 
                                   style="background-color: #28a745; color: white; padding: 14px 35px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold; font-size: 16px;">
                                    üîó Xem chi ti·∫øt c√¥ng vi·ªác
                                </a>
                            </div>
                            
                            <p style="font-size: 14px; color: #6c757d; line-height: 1.6; margin-top: 30px; text-align: center;">
                                Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông t·ª´ h·ªá th·ªëng Odoo<br/>
                                Vui l√≤ng kh√¥ng tr·∫£ l·ªùi email n√†y
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
            </field>
            <field name="lang">${object.assigned_employee_id.lang if object.assigned_employee_id else 'en_US'}</field>
            <field name="auto_delete" eval="False"/>
        </record>
        
        <!-- 5. Email Template: T·ª™ CH·ªêI C√îNG VI·ªÜC -->
        <record id="email_template_task_rejected" model="mail.template">
            <field name="name">[TASK] C√¥ng vi·ªác c·∫ßn ch·ªânh s·ª≠a</field>
            <field name="model_id" ref="model_cong_viec"/>
            <field name="subject">[TASK] C√¥ng vi·ªác c·∫ßn ch·ªânh s·ª≠a: ${object.name}</field>
            <field name="email_from">${object.supervisor_id.work_email|safe}</field>
            <field name="email_to">${object.assigned_employee_id.work_email|safe}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: Arial, Helvetica, sans-serif; font-size: 14px;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 20px;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <!-- Header -->
                    <tr>
                        <td style="padding: 30px; text-align: center; background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); border-radius: 10px 10px 0 0;">
                            <h1 style="color: white; margin: 0; font-size: 24px;">‚ùå C√îNG VI·ªÜC C·∫¶N CH·ªàNH S·ª¨A</h1>
                        </td>
                    </tr>
                    <!-- Content -->
                    <tr>
                        <td style="padding: 40px;">
                            <!-- Ai g·ª≠i? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                                <strong style="color: #dc3545;">üë§ Ai g·ª≠i:</strong>
                                <p style="margin: 5px 0 0 0;">${object.supervisor_id.name} (Ng∆∞·ªùi gi√°m s√°t)</p>
                            </div>
                            
                            <!-- G·ª≠i cho ai? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
                                <strong style="color: #dc3545;">üìß G·ª≠i cho:</strong>
                                <p style="margin: 5px 0 0 0;">${object.assigned_employee_id.name} (Nh√¢n vi√™n th·ª±c hi·ªán)</p>
                            </div>
                            
                            <!-- G·ª≠i v√¨ vi·ªác g√¨? -->
                            <div style="margin-bottom: 20px; padding: 15px; background-color: #f8d7da; border-left: 4px solid #dc3545; border-radius: 8px;">
                                <strong style="color: #721c24;">üìå G·ª≠i v√¨ vi·ªác g√¨:</strong>
                                <p style="margin: 5px 0 0 0; font-size: 16px;">
                                    <strong>C√¥ng vi·ªác ch∆∞a ƒë·∫°t ‚Äì c·∫ßn l√†m l·∫°i</strong>
                                </p>
                            </div>
                            
                            <!-- Th√¥ng tin c√¥ng vi·ªác -->
                            <div style="background-color: #f8d7da; padding: 25px; border-radius: 8px; margin: 25px 0; border-left: 5px solid #dc3545;">
                                <h3 style="color: #dc3545; margin-top: 0;">üìã Th√¥ng tin c√¥ng vi·ªác:</h3>
                                <table width="100%" style="border-collapse: collapse;">
                                    <tr>
                                        <td style="padding: 8px 0; width: 40%;"><strong>T√™n c√¥ng vi·ªác:</strong></td>
                                        <td style="padding: 8px 0; font-weight: bold; color: #dc3545;">${object.name}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>M√£ c√¥ng vi·ªác:</strong></td>
                                        <td style="padding: 8px 0;">${object.task_code}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Tr·∫°ng th√°i:</strong></td>
                                        <td style="padding: 8px 0;">
                                            <span style="background-color: #ffc107; padding: 4px 12px; border-radius: 4px; color: #212529; font-weight: bold;">
                                                ƒêang th·ª±c hi·ªán (c·∫ßn ch·ªânh s·ª≠a)
                                            </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Ng∆∞·ªùi t·ª´ ch·ªëi:</strong></td>
                                        <td style="padding: 8px 0;">${object.supervisor_id.name}</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;"><strong>Th·ªùi gian:</strong></td>
                                        <td style="padding: 8px 0;">${format_datetime(object.write_date, tz='Asia/Ho_Chi_Minh', dt_format='dd/MM/yyyy HH:mm')}</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <!-- L√Ω do t·ª´ ch·ªëi & Y√™u c·∫ßu ch·ªânh s·ª≠a -->
                            <div style="margin-bottom: 20px; padding: 20px; background-color: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                                <strong style="color: #856404; font-size: 16px;">‚ö†Ô∏è L√Ω do t·ª´ ch·ªëi:</strong>
                                <p style="margin: 10px 0 0 0; color: #856404; white-space: pre-line;">
                                    % if object.message_ids:
                                    ${object.message_ids[0].body if object.message_ids else 'Vui l√≤ng xem chi ti·∫øt y√™u c·∫ßu ch·ªânh s·ª≠a trong ph·∫ßn Ghi ch√∫/Chatter'}
                                    % else
                                    Vui l√≤ng xem chi ti·∫øt y√™u c·∫ßu ch·ªânh s·ª≠a trong ph·∫ßn Ghi ch√∫/Chatter
                                    % endif
                                </p>
                            </div>
                            
                            <!-- C·∫ßn l√†m g√¨? -->
                            <div style="margin-bottom: 20px; padding: 20px; background-color: #f8d7da; border-radius: 8px;">
                                <strong style="color: #721c24; font-size: 16px;">‚úÖ C·∫ßn b·∫°n l√†m g√¨:</strong>
                                <ol style="margin: 10px 0; padding-left: 20px; color: #721c24;">
                                    <li>Xem l·∫°i y√™u c·∫ßu v√† ph·∫£n h·ªìi t·ª´ ng∆∞·ªùi gi√°m s√°t</li>
                                    <li>Ch·ªânh s·ª≠a k·∫øt qu·∫£ c√¥ng vi·ªác theo y√™u c·∫ßu</li>
                                    <li>G·ª≠i l·∫°i duy·ªát sau khi ho√†n th√†nh ch·ªânh s·ª≠a</li>
                                    <li>Ki·ªÉm tra ph·∫ßn Ghi ch√∫/Chatter ƒë·ªÉ xem chi ti·∫øt</li>
                                </ol>
                            </div>
                            
                            <!-- Link ch·ªânh s·ª≠a -->
                            <div style="text-align: center; margin: 30px 0;">
                                <a href="/web#id=${object.id}&amp;view_type=form&amp;model=cong.viec" 
                                   style="background-color: #dc3545; color: white; padding: 14px 35px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold; font-size: 16px;">
                                    üîó Ch·ªânh s·ª≠a c√¥ng vi·ªác ngay
                                </a>
                            </div>
                            
                            <p style="font-size: 14px; color: #6c757d; line-height: 1.6; margin-top: 30px; text-align: center;">
                                Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông t·ª´ h·ªá th·ªëng Odoo<br/>
                                Vui l√≤ng kh√¥ng tr·∫£ l·ªùi email n√†y
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
            </field>
            <field name="lang">${object.assigned_employee_id.lang if object.assigned_employee_id else 'en_US'}</field>
            <field name="auto_delete" eval="False"/>
        </record>
        
        <!-- Email Template: C√¥ng vi·ªác ho√†n th√†nh (Legacy - gi·ªØ l·∫°i ƒë·ªÉ t∆∞∆°ng th√≠ch) -->
        <record id="email_template_task_completed" model="mail.template">
            <field name="name">C√¥ng vi·ªác: Ho√†n th√†nh</field>
            <field name="model_id" ref="model_cong_viec"/>
            <field name="subject">‚úÖ C√¥ng vi·ªác ho√†n th√†nh: ${object.name}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${(object.supervisor_id.work_email if object.supervisor_id else object.assigned_employee_id.manager_id.work_email if object.assigned_employee_id.manager_id else user.email)|safe}</field>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: Arial, Helvetica, sans-serif; font-size: 14px;">
    <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 20px;">
        <tr>
            <td align="center">
                <table width="600" cellpadding="0" cellspacing="0" style="background-color: white; border-radius: 10px;">
                    <tr>
                        <td style="padding: 40px;">
                            <h2 style="color: #28a745; margin-top: 0;">‚úÖ C√¥ng vi·ªác ƒë√£ ho√†n th√†nh!</h2>
                            
                            <p style="font-size: 16px; line-height: 1.6;">
                                Nh√¢n vi√™n <strong>${object.assigned_employee_id.name}</strong> ƒë√£ ho√†n th√†nh c√¥ng vi·ªác.
                            </p>
                            
                            <div style="background-color: #d4edda; padding: 25px; border-radius: 8px; margin: 25px 0; border-left: 5px solid #28a745;">
                                <h3 style="color: #28a745; margin-top: 0;">${object.name}</h3>
                                
                                <ul style="list-style: none; padding: 0;">
                                    <li style="padding: 8px 0;"><strong>M√£ c√¥ng vi·ªác:</strong> ${object.task_code}</li>
                                    <li style="padding: 8px 0;"><strong>Nh√¢n vi√™n:</strong> ${object.assigned_employee_id.name}</li>
                                    <li style="padding: 8px 0;"><strong>Ng√†y ho√†n th√†nh:</strong> ${format_datetime(object.completed_date, tz='Asia/Ho_Chi_Minh', dt_format='dd/MM/yyyy HH:mm') if object.completed_date else 'N/A'}</li>
                                    <li style="padding: 8px 0;"><strong>Th·ªùi gian th·ª±c t·∫ø:</strong> ${object.actual_hours} gi·ªù (∆Ø·ªõc l∆∞·ª£ng: ${object.estimated_hours} gi·ªù)</li>
                                    % if object.ai_quality_score:
                                    <li style="padding: 8px 0;"><strong>ƒêi·ªÉm ch·∫•t l∆∞·ª£ng AI:</strong> 
                                        <span style="color: ${'#28a745' if object.ai_quality_score >= 75 else '#ffc107' if object.ai_quality_score >= 60 else '#dc3545'}; font-size: 18px; font-weight: bold;">
                                            ${f'{object.ai_quality_score:.1f}' if object.ai_quality_score else '0.0'}/100
                                        </span>
                                    </li>
                                    % endif
                                </ul>
                                
                                % if object.result_note:
                                <h4 style="color: #28a745;">üìù K·∫øt qu·∫£ b√°o c√°o:</h4>
                                <div style="background-color: white; padding: 15px; border-radius: 5px;">
                                    ${object.result_note}
                                </div>
                                % endif
                            </div>
                            
                            <div style="text-align: center; margin: 30px 0;">
                                <a href="/web#id=${object.id}&amp;view_type=form&amp;model=cong.viec" 
                                   style="background-color: #28a745; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;">
                                    Xem chi ti·∫øt &amp; Duy·ªát
                                </a>
                            </div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>
            </field>
            <field name="lang">${object.assigned_employee_id.lang}</field>
            <field name="auto_delete" eval="False"/>
        </record>
        
    </data>
</odoo>
